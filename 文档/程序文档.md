<!-- TOC START min:1 max:3 link:true update:true -->
- [程序文档：](#)
  - [GithubRepo](#githubrepo)
    - [字段](#-1)
    - [__init(self,user,repo)__方法](#__initselfuserrepo__)
  - [CrawlGithub](#crawlgithub)
    - [爬取commits_url：https://api.github.com/repos/owncloud/android/commits](#commits_urlhttpsapigithubcomreposowncloudandroidcommits)
    - [爬取commit_url:](#commit_url)
    - [小总结](#-2)
    - [爬取issues_url](#issues_url)
    - [爬取 events_url](#-events_url)
    - [event事件类型](#event)
    - [爬取 pull_url](#-pull_url)
    - [爬取comments_url](#comments_url)
  - [CrawlGithub 总结](#crawlgithub-)
    - [成分](#-3)
    - [issue](#issue)
- [print results](#print-results)
    - [梳理API of GitHub](#api-of-github)
    - [find Android 项目](#find-android-)
    - [爬取Android 项目](#android-)
    - [获得提交描述信息中有 bug修复的commit](#-bugcommit)
    - [获得token](#token)

<!-- TOC END -->


# 程序文档：
## GithubRepo
GithubRepo：github数据仓库。一个GithubRepo对象实例对应一个代爬取的Android项目。
### 字段
user：仓库的用户
repo：仓库的名称
根据这两个即可确定Github获取信息的地址：
如 user = owncloud，repo=android，则：
项目访问地址（浏览器） https://github.com/owncloud/android
#### name
owncloud_android
#### data_dir
F:/LM/A_Android_bug模式匹配挖掘/AndroidBugMutator/data/owncloud_android

![](assets/markdown-img-paste-20180313201017110.png)
#### url
https://api.github.com/repos/owncloud/android/issues
https://api.github.com/repos/owncloud/android/commits

{'Authorization': 'token ef373502bf40d0705e70a73d4935390bde7aebf8', 'Accept': 'application/vnd.github.v3+json', 'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.103 Safari/537.36'}

#### mongodb
+ Collection(Database(MongoClient(host=['localhost:27017'],document_class=dict, tz_aware=False, connect=True), u'owncloud_android'), u'comments')
+ Collection(Database(MongoClient(host=['localhost:27017'],document_class=dict, tz_aware=False, connect=True), u'owncloud_android'), u'issues')
+ Collection(Database(MongoClient(host=['localhost:27017'],document_class=dict, tz_aware=False, connect=True), u'owncloud_android'), u'commits')
+ Collection(Database(MongoClient(host=['localhost:27017'],document_class=dict, tz_aware=False, connect=True), u'owncloud_android'), u'commitsinfo')
+ Collection(Database(MongoClient(host=['localhost:27017'],document_class=dict, tz_aware=False, connect=True), u'owncloud_android'), u'commentsinfo')
+ Collection(Database(MongoClient(host=['localhost:27017'],document_class=dict, tz_aware=False, connect=True), u'owncloud_android'), u'issuesinfo')
+ Collection(Database(MongoClient(host=['localhost:27017'],document_class=dict, tz_aware=False, connect=True), u'owncloud_android'), u'issuesinfo2')
+ Collection(Database(MongoClient(host=['localhost:27017'],document_class=dict, tz_aware=False, connect=True), u'owncloud_android'), u'issuesinfo3')
+ Collection(Database(MongoClient(host=['localhost:27017'], document_class=dict, tz_aware=False, connect=True), u'owncloud_android'), u'diffinfo')
### __init(self,user,repo)__方法
初始化以上字段
 + self.init_url()：  初始化爬取url
 + self.init_filepath()：初始化数据存储路径
 + self.init_mongodb_coll()： 初始化数据库集合

## CrawlGithub
API url
### 爬取commits_url：https://api.github.com/repos/owncloud/android/commits

返回结果：
```json
results = [{
    "sha": "ecf9dd20227152cbc6db915800694b1a215e95dc",
    getpatchs: {
      "author": {
        "name": "David González Verdugo",
        "email": "davigonz@users.noreply.github.com",
        "date": "2018-03-13T10:15:22Z"
      },
      "committer": {
        "name": "GitHub",
        "email": "noreply@github.com",
        "date": "2018-03-13T10:15:22Z"
      },
      "message": "Merge pull request #2142 from sd1998/Fix-2141\n\nFix to Issue #2141",
      "tree": {
        "sha": "a0b7bf175790d72dfc2d1577e027710e5b6fdeb1",
        "url": "https://api.github.com/repos/owncloud/android/git/trees/a0b7bf175790d72dfc2d1577e027710e5b6fdeb1"
      },
      "url": "https://api.github.com/repos/owncloud/android/git/commits/ecf9dd20227152cbc6db915800694b1a215e95dc",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJap6S6CRBK7hj4Ov3rIwAAdHIIAARhfYJecuiS7SkfQurKGb94\nwsEuUxZBudyMA70KZnIuLyplhwkqtisVNP1+AucPlxgKRdmgTHpDwPUWFQa+jZA/\nHI8iqtSoXFkxdeaov653+f6lGWZOt3ntbhMlHLxXwcWLB1TVV0CwSjcJSL8uHpav\n5Tx/ErnQRTyQTtPXaX/kKyOf5juHDPbLGrLRNRPtPbgPkr6gLvB8r655lddcPrvP\nV0QQOz+yBagI0HjfXneE0x7UZdyUYzb40fRR6cjqfoU2F6VKcj8y4VhK/yRgNnWj\nFftLNN1eKGG1VkUXsO5KwW5OgmFE8q5YHEQDcq8frdSWy2dwCogJFsKSymd4NLA=\n=Tb3C\n-----END PGP SIGNATURE-----\n",
        "payload": "tree a0b7bf175790d72dfc2d1577e027710e5b6fdeb1\nparent 2e667f0002b89c41cb67bb0095d39aa3f100fb47\nparent 38e54e1bf5c93aed86ca1ac5cdddb287fd7ce602\nauthor David González Verdugo <davigonz@users.noreply.github.com> 1520936122 +0100\ncommitter GitHub <noreply@github.com> 1520936122 +0100\n\nMerge pull request #2142 from sd1998/Fix-2141\n\nFix to Issue #2141"
      }
    },
    "url": "https://api.github.com/repos/owncloud/android/commits/ecf9dd20227152cbc6db915800694b1a215e95dc",
    "html_url": getpatchs,
    "comments_url": "https://api.github.com/repos/owncloud/android/commits/ecf9dd20227152cbc6db915800694b1a215e95dc/comments",
    "author": {
      "login": "davigonz",
      "id": 15261363,
      "avatar_url": "https://avatars0.githubusercontent.com/u/15261363?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/davigonz",
      "html_url": "https://github.com/davigonz",
      "followers_url": "https://api.github.com/users/davigonz/followers",
      "following_url": "https://api.github.com/users/davigonz/following{/other_user}",
      "gists_url": "https://api.github.com/users/davigonz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/davigonz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/davigonz/subscriptions",
      "organizations_url": "https://api.github.com/users/davigonz/orgs",
      "repos_url": "https://api.github.com/users/davigonz/repos",
      "events_url": "https://api.github.com/users/davigonz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/davigonz/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "web-flow",
      "id": 19864447,
      "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/web-flow",
      "html_url": "https://github.com/web-flow",
      "followers_url": "https://api.github.com/users/web-flow/followers",
      "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
      "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
      "organizations_url": "https://api.github.com/users/web-flow/orgs",
      "repos_url": "https://api.github.com/users/web-flow/repos",
      "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/web-flow/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "2e667f0002b89c41cb67bb0095d39aa3f100fb47",
        "url": "https://api.github.com/repos/owncloud/android/commits/2e667f0002b89c41cb67bb0095d39aa3f100fb47",
        "html_url": getpatchs
      },
      {
        "sha": "38e54e1bf5c93aed86ca1ac5cdddb287fd7ce602",
        "url": "https://api.github.com/repos/owncloud/android/commits/38e54e1bf5c93aed86ca1ac5cdddb287fd7ce602",
        "html_url": getpatchs
      }
    ]
  },]
```

```Python
for result in results:
  保留
  sha：result[sha]

  url: result[url]
  commit_url: result[commit][url]
  comment_count:
  comment_url: result[comments_url]

  commit： result[commit][author][name], result[commit][committer][name]
  message: result[commit][message]
  tree: result[commit][tree], 含 sha 和 url
  parents: [result[parents][$i][sha]]， 含sha 和 url

```
web_url: https://github.com/owncloud/android/
commits_url : https://api.github.com/repos/owncloud/android/commits
repos_url: https://api.github.com/repos/owncloud/android/

root_url:https://github.com
api_url: https://api.github.com

web_url:root_url+"/"+user+"/"+repo
repo_url:api_url+"/repos/"+user+"/"+repo
commits_url：repos_url+"/commits"
commit_url: commits_url+"/",适配 commit_sha
parent_url: commits_url+"/",适配 parent_sha
commit_comments_url: commit_url+"/comments"

git_commit_url=repos+"/git/commits/", 适配 commit_sha
git_tree_url=repos+"/git/trees/", 适配 commit_tree_sha
git_blob_ url= repos+"/git/blobs/"，适配 file_change_sha


+ url : commits_url+"/"+sha
+ comments_url : commits_url+"/"+sha+"/comments"
+ parent_urls: [commits_url+"/"+parent_$i_sha]

+ commit_url: repos_root+"/git/commits/"+sha
+ tree_url: repos_root+"/git/trees/"+tree_sha

![](assets/markdown-img-paste-20180313211743641.png)
所以进一步需要使用的内容为：
+ commit_sha：result[sha]
+
+ tree_sha: result[commit][tree][sha]
+ parents_sha: [result[parents][$i][sha]]
+ comment_count: result[comments_count]
+ commiter: result[commit][author][name], result[commit][committer][name]
+ message: result[commit][message] 可能和issue相关

### 爬取commit_url:
结果增加了
```json
"stats": {
    "total": 86,
    "additions": 43,
    "deletions": 43
  },
  "files": [
    {
      "sha": "581b0aaee29474f678aec91a3cb4771d9e7eb88b",
      "filename": "src/com/owncloud/android/ui/activity/UploadFilesActivity.java",
      "status": "modified",
      "additions": 43,
      "deletions": 43,
      "changes": 86,
      "blob_url": "https://github.com/owncloud/android/blob/ecf9dd20227152cbc6db915800694b1a215e95dc/src/com/owncloud/android/ui/activity/UploadFilesActivity.java",
      "raw_url": "https://github.com/owncloud/android/raw/ecf9dd20227152cbc6db915800694b1a215e95dc/src/com/owncloud/android/ui/activity/UploadFilesActivity.java",
      "contents_url": "https://api.github.com/repos/owncloud/android/contents/src/com/owncloud/android/ui/activity/UploadFilesActivity.java?ref=ecf9dd20227152cbc6db915800694b1a215e95dc",
      "patch": "@@ -2,7 +2,8 @@\n  *   ownCloud Android client application\n  *\n  *   @author David A. Velasco\n- *   Copyright (C) 2016 ownCloud GmbH.\n+ *   @author Shashvat Kedia\n+ *   Copyright (C) 2018 ownCloud GmbH.\n  *\n  *   This program is free software: you can redistribute it and/or modify\n  *   it under the terms of the GNU General Public License version 2,\n@@ -22,18 +23,16 @@\n \n import android.accounts.Account;\n import android.app.Activity;\n-import android.content.Context;\n import android.content.Intent;\n import android.content.SharedPreferences;\n-import android.database.Cursor;\n-import android.graphics.Bitmap;\n import android.net.Uri;\n import android.os.AsyncTask;\n import android.os.Bundle;\n import android.os.Environment;\n import android.preference.PreferenceManager;\n import android.provider.MediaStore;\n import android.support.v4.app.DialogFragment;\n+import android.support.v4.content.FileProvider;\n import android.support.v7.app.ActionBar;\n import android.view.MenuItem;\n import android.view.View;\n@@ -53,8 +52,8 @@\n import com.owncloud.android.ui.fragment.LocalFileListFragment;\n import com.owncloud.android.utils.FileStorageUtils;\n \n-import java.io.ByteArrayOutputStream;\n import java.io.File;\n+import java.io.IOException;\n import java.util.Calendar;\n \n \n@@ -89,6 +88,8 @@\n     private Button mUploadBtn;\n     private Account mAccountOnCreation;\n     private DialogFragment mCurrentDialog;\n+    private String capturedPhotoPath;\n+    private File image = null;\n \n     private RadioButton mRadioBtnCopyFiles;\n     private RadioButton mRadioBtnMoveFiles;\n@@ -194,11 +195,38 @@ public static void startUploadActivityForResult(Activity activity, Account accou\n      * */\n     private void uploadFromCamera(){\n         Intent pictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\n+        File photoFile = createImageFile();\n+        if(photoFile != null){\n+            Uri photoUri = FileProvider.getUriForFile(getApplicationContext(),\n+                    getResources().getString(R.string.file_provider_authority),photoFile);\n+            pictureIntent.putExtra(MediaStore.EXTRA_OUTPUT,photoUri);\n+        }\n         if (pictureIntent.resolveActivity(getPackageManager()) != null) {\n             startActivityForResult(pictureIntent, REQUEST_IMAGE_CAPTURE);\n         }\n     }\n \n+    private File createImageFile(){\n+        try {\n+            File storageDir = getExternalFilesDir(Environment.DIRECTORY_PICTURES);\n+            image = File.createTempFile(getCapturedImageName(), \".jpg\", storageDir);\n+            capturedPhotoPath = image.getAbsolutePath();\n+        } catch(IOException exception){\n+            Log_OC.d(TAG,exception.toString());\n+        }\n+        return image;\n+    }\n+\n+    private File getCapturedImageFile(){\n+        File capturedImage = new File(capturedPhotoPath);\n+        File parent = capturedImage.getParentFile();\n+        File newImage = new File(parent,getCapturedImageName() + \".jpg\");\n+        capturedImage.renameTo(newImage);\n+        capturedImage.delete();\n+        capturedPhotoPath = newImage.getAbsolutePath();\n+        return newImage;\n+    }\n+\n     private String getCapturedImageName(){\n         Calendar calendar = Calendar.getInstance();\n         String year = \"\" + calendar.get(Calendar.YEAR);\n@@ -212,55 +240,27 @@ private String getCapturedImageName(){\n         hour = hour.length() == 3 ? hour.substring(1,hour.length()) : hour;\n         minute = minute.length() == 3 ? minute.substring(1,minute.length()) : minute;\n         second = second.length() == 3 ? second.substring(1,second.length()) : second;\n-        String newImageName = \"IMG_\" + year + month + day + \"_\" + hour + minute + second + \".jpg\";\n+        String newImageName = \"IMG_\" + year + month + day + \"_\" + hour + minute + second;\n         return newImageName;\n     }\n \n     @Override\n     protected void onActivityResult(int requestCode,int resultCode,Intent capturedData){\n         if(requestCode == REQUEST_IMAGE_CAPTURE && resultCode == RESULT_OK){\n-            Bundle capturedImageData = capturedData.getExtras();\n-            Bitmap capturedImage = (Bitmap) capturedImageData.get(\"data\");\n-            Uri capturedImageUri = getImageUri(getApplicationContext(),capturedImage);\n-            String capturedImagePath = getRealPathFromUri(capturedImageUri);\n-            File capturedImageFile = new File(capturedImagePath);\n-            File parent = capturedImageFile.getParentFile();\n-            File newImage = new File(parent,getCapturedImageName());\n-            capturedImageFile.renameTo(newImage);\n-            capturedImageFile.delete();\n-            new CheckAvailableSpaceTask(newImage.getAbsolutePath()).execute();\n-        }\n-        else if(resultCode == RESULT_CANCELED){\n+            new CheckAvailableSpaceTask(getCapturedImageFile().getAbsolutePath()).execute();\n+        } else if(requestCode == REQUEST_IMAGE_CAPTURE && resultCode == RESULT_CANCELED){\n+            if(image != null){\n+                image.delete();\n+                Log_OC.d(TAG,\"File deleted\");\n+            }\n+            setResult(RESULT_CANCELED);\n+            finish();\n+        } else if(resultCode == RESULT_CANCELED){\n             setResult(RESULT_CANCELED);\n             finish();\n         }\n     }\n \n-    /**\n-     *Compressing the image to JPEG format and using the MediaStore to Uri of the Image\n-     * @param context Context of current state of the application\n-     * @param capturedImage Bitmap of the Image captured\n-     * @return Uri of the image that has been captured using the device's camera\n-     */\n-    private Uri getImageUri(Context context, Bitmap capturedImage){\n-        ByteArrayOutputStream bytes = new ByteArrayOutputStream();\n-        capturedImage.compress(Bitmap.CompressFormat.JPEG, 100, bytes);\n-        String path = MediaStore.Images.Media.insertImage(context.getContentResolver(),capturedImage,\"Captured Image\",null);\n-        return Uri.parse(path);\n-    }\n-\n-    /**\n-     *Using the content provider to obtain the path of the image\n-     * @param capturedPictureUri The Uri of the captured Image obtained from calling getImageUri() function.\n-     * @return Actual Uri of the captured Image\n-     */\n-    private String getRealPathFromUri(Uri capturedPictureUri){\n-        Cursor cursor = getContentResolver().query(capturedPictureUri,null,null,null,null);\n-        cursor.moveToFirst();\n-        int index = cursor.getColumnIndex(MediaStore.Images.ImageColumns.DATA);\n-        return cursor.getString(index);\n-    }\n-\n     @Override\n     public boolean onOptionsItemSelected(MenuItem item) {\n         boolean retval = true;"
    }
  ]


```
``` python
for result in results:
  stats：result[stats]
  file_changes_sha:[result[files][$i][sha]]

  for file in files:
    file_change_sha:result[files][sha]
    changes:(result[files][additions],result[files][deletions],result[files][changes])
    filename:result[files][filename]
    patch:result[files][patch]
+ ]
```
+ commits_url: result[sha]
+ blob_url: web+"/blob/"+commit_sha+"/"+filename，blob上的文件
+ raw_url: web+"/raw/"+commit_sha+"/"+filename, 原始文件,这个是有用的，可以获取源文件
+ contents_url: https://api.github.com/repos/
  + git_url：repos+"/git/blobs/"+file_change_$i_sha
  + download_url: 略


### 小总结
![](/assets/markdown-img-paste-20180314084601916.png)

### 爬取issues_url
```json
  {
    "url": "https://api.github.com/repos/owncloud/android/issues/2151",
    "repository_url": "https://api.github.com/repos/owncloud/android",
    "labels_url": "https://api.github.com/repos/owncloud/android/issues/2151/labels{/name}",
    "comments_url": "https://api.github.com/repos/owncloud/android/issues/2151/comments",
    "events_url": "https://api.github.com/repos/owncloud/android/issues/2151/events",
    "html_url": "https://github.com/owncloud/android/pull/2151",
    "id": 305537440,
    "number": 2151,
    "title": "Release 2.7.0 beta v1",
    "user": {
      "login": "davigonz",
      "id": 15261363,
      "avatar_url": "https://avatars0.githubusercontent.com/u/15261363?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/davigonz",
      "html_url": "https://github.com/davigonz",
      "followers_url": "https://api.github.com/users/davigonz/followers",
      "following_url": "https://api.github.com/users/davigonz/following{/other_user}",
      "gists_url": "https://api.github.com/users/davigonz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/davigonz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/davigonz/subscriptions",
      "organizations_url": "https://api.github.com/users/davigonz/orgs",
      "repos_url": "https://api.github.com/users/davigonz/repos",
      "events_url": "https://api.github.com/users/davigonz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/davigonz/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [

    ],
    "state": "open",
    "locked": false,
    "assignee": {
      "login": "davigonz",
      "id": 15261363,
      "avatar_url": "https://avatars0.githubusercontent.com/u/15261363?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/davigonz",
      "html_url": "https://github.com/davigonz",
      "followers_url": "https://api.github.com/users/davigonz/followers",
      "following_url": "https://api.github.com/users/davigonz/following{/other_user}",
      "gists_url": "https://api.github.com/users/davigonz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/davigonz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/davigonz/subscriptions",
      "organizations_url": "https://api.github.com/users/davigonz/orgs",
      "repos_url": "https://api.github.com/users/davigonz/repos",
      "events_url": "https://api.github.com/users/davigonz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/davigonz/received_events",
      "type": "User",
      "site_admin": false
    },
    "assignees": [
      {
        "login": "davigonz",
        "id": 15261363,
        "avatar_url": "https://avatars0.githubusercontent.com/u/15261363?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davigonz",
        "html_url": "https://github.com/davigonz",
        "followers_url": "https://api.github.com/users/davigonz/followers",
        "following_url": "https://api.github.com/users/davigonz/following{/other_user}",
        "gists_url": "https://api.github.com/users/davigonz/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/davigonz/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/davigonz/subscriptions",
        "organizations_url": "https://api.github.com/users/davigonz/orgs",
        "repos_url": "https://api.github.com/users/davigonz/repos",
        "events_url": "https://api.github.com/users/davigonz/events{/privacy}",
        "received_events_url": "https://api.github.com/users/davigonz/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "milestone": null,
    "comments": 1,
    "created_at": "2018-03-15T12:43:48Z",
    "updated_at": "2018-03-15T13:55:01Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "pull_request": {
      "url": "https://api.github.com/repos/owncloud/android/pulls/2151",
      "html_url": "https://github.com/owncloud/android/pull/2151",
      "diff_url": "https://github.com/owncloud/android/pull/2151.diff",
      "patch_url": "https://github.com/owncloud/android/pull/2151.patch"
    },
    "body": "Implements #2147 "
  }
```
issues_url:
[issue]
+ id
+ number
+ title
+ body
+ comments
+ labels : [result[labels][$i][name]]
+ state ：
+ locked ：
+ user :
+ assignees :
+ created updated closed
+ author_association

转移URL：
"issue_url": "https://api.github.com/repos/owncloud/android/issues/2151",repo_url+"/issues"+ issue_number
"labels_url": "https://api.github.com/repos/owncloud/android/issues/2151/labels{/name}", 即label
"comments_url": "https://api.github.com/repos/owncloud/android/issues/2151/comments",  issue_url+"/comments"
[comment]
comment id body   issues_url+"/comments/"+commnent_id
"events_url": "https://api.github.com/repos/owncloud/android/issues/2151/events",
issue_url+"/events"
发生的事件
id event body
events+"/"+events_id

"html_url": "https://github.com/owncloud/android/pull/2151", web_url+"/pull/"+issue_number
或 web_url+"/issues/"+issue_number

+ issue_url
```json
{
  "url": "https://api.github.com/repos/owncloud/android/issues/2151",
  "repository_url": "https://api.github.com/repos/owncloud/android",
  "labels_url": "https://api.github.com/repos/owncloud/android/issues/2151/labels{/name}",
  "comments_url": "https://api.github.com/repos/owncloud/android/issues/2151/comments",
  "events_url": "https://api.github.com/repos/owncloud/android/issues/2151/events",
  "html_url": "https://github.com/owncloud/android/pull/2151",
  "id": 305537440,
  "number": 2151,
  "title": "Release 2.7.0 beta v1",
  "user": {
    "login": "davigonz",
    "id": 15261363,
    "avatar_url": "https://avatars0.githubusercontent.com/u/15261363?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/davigonz",
    "html_url": "https://github.com/davigonz",
    "followers_url": "https://api.github.com/users/davigonz/followers",
    "following_url": "https://api.github.com/users/davigonz/following{/other_user}",
    "gists_url": "https://api.github.com/users/davigonz/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/davigonz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/davigonz/subscriptions",
    "organizations_url": "https://api.github.com/users/davigonz/orgs",
    "repos_url": "https://api.github.com/users/davigonz/repos",
    "events_url": "https://api.github.com/users/davigonz/events{/privacy}",
    "received_events_url": "https://api.github.com/users/davigonz/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "davigonz",
    "id": 15261363,
    "avatar_url": "https://avatars0.githubusercontent.com/u/15261363?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/davigonz",
    "html_url": "https://github.com/davigonz",
    "followers_url": "https://api.github.com/users/davigonz/followers",
    "following_url": "https://api.github.com/users/davigonz/following{/other_user}",
    "gists_url": "https://api.github.com/users/davigonz/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/davigonz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/davigonz/subscriptions",
    "organizations_url": "https://api.github.com/users/davigonz/orgs",
    "repos_url": "https://api.github.com/users/davigonz/repos",
    "events_url": "https://api.github.com/users/davigonz/events{/privacy}",
    "received_events_url": "https://api.github.com/users/davigonz/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "davigonz",
      "id": 15261363,
      "avatar_url": "https://avatars0.githubusercontent.com/u/15261363?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/davigonz",
      "html_url": "https://github.com/davigonz",
      "followers_url": "https://api.github.com/users/davigonz/followers",
      "following_url": "https://api.github.com/users/davigonz/following{/other_user}",
      "gists_url": "https://api.github.com/users/davigonz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/davigonz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/davigonz/subscriptions",
      "organizations_url": "https://api.github.com/users/davigonz/orgs",
      "repos_url": "https://api.github.com/users/davigonz/repos",
      "events_url": "https://api.github.com/users/davigonz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/davigonz/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2018-03-15T12:43:48Z",
  "updated_at": "2018-03-15T13:55:01Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "pull_request": {
    "url": "https://api.github.com/repos/owncloud/android/pulls/2151",
    "html_url": "https://github.com/owncloud/android/pull/2151",
    "diff_url": "https://github.com/owncloud/android/pull/2151.diff",
    "patch_url": "https://github.com/owncloud/android/pull/2151.patch"
  },
  "body": "Implements #2147 ",
  "closed_by": null
}
```
新增 pull_request
+ url : web_url+"/pulls/"+issue_number
+ html_url: is issue_html_url
+ diff_url: issue_number.diff
+ patch_url: issue_number.patch

### 爬取 events_url
id actor  repo
+ payload-
  + commit
  + pull_request

### event事件类型
+ PullRequestEvent
Triggered when a pull request is assigned, unassigned, labeled, unlabeled, opened, edited, closed, reopened, or synchronized. Also triggered when a pull request review is requested, or when a review request is removed.
+ issuesEvent
Triggered when an issue is assigned, unassigned, labeled, unlabeled, opened, edited, milestoned, demilestoned, closed, or reopened.
```json
CommitCommentEvent
CreateEvent
DeleteEvent
DeploymentEvent
DeploymentStatusEvent
DownloadEvent
FollowEvent
ForkEvent
ForkApplyEvent
GistEvent
GollumEvent
InstallationEvent
InstallationRepositoriesEvent
IssueCommentEvent
IssuesEvent
LabelEvent
MarketplacePurchaseEvent
MemberEvent
MembershipEvent
MilestoneEvent
OrganizationEvent
OrgBlockEvent
PageBuildEvent
ProjectCardEvent
ProjectColumnEvent
ProjectEvent
PublicEvent
PullRequestEvent
PullRequestReviewEvent
PullRequestReviewCommentEvent
PushEvent
ReleaseEvent
RepositoryEvent
StatusEvent
TeamEvent
TeamAddEvent
WatchEvent
```

### 爬取 pull_url

```json
{
    "url": "https://api.github.com/repos/owncloud/android/pulls/2152",
    "id": 175267245,
    "html_url": "https://github.com/owncloud/android/pull/2152",
    "diff_url": "https://github.com/owncloud/android/pull/2152.diff",
    "patch_url": "https://github.com/owncloud/android/pull/2152.patch",
    "issue_url": "https://api.github.com/repos/owncloud/android/issues/2152",
    "number": 2152,
    "state": "open",
    "locked": false,
    "title": "fix download/available offline icons",
    "user": {
      "login": "theScrabi",
      "id": 1891273,
      "avatar_url": "https://avatars3.githubusercontent.com/u/1891273?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theScrabi",
      "html_url": "https://github.com/theScrabi",
      "followers_url": "https://api.github.com/users/theScrabi/followers",
      "following_url": "https://api.github.com/users/theScrabi/following{/other_user}",
      "gists_url": "https://api.github.com/users/theScrabi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theScrabi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theScrabi/subscriptions",
      "organizations_url": "https://api.github.com/users/theScrabi/orgs",
      "repos_url": "https://api.github.com/users/theScrabi/repos",
      "events_url": "https://api.github.com/users/theScrabi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theScrabi/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "fixes https://github.com/owncloud/android/issues/2145 and https://github.com/owncloud/android/issues/2081",
    "created_at": "2018-03-15T14:26:32Z",
    "updated_at": "2018-03-15T14:30:30Z",
    "closed_at": null,
    "merged_at": null,
    "merge_commit_sha": "89afd53c96a5cbf9f0d6f473dda305c2c3f407fd",
    "assignee": null,
    "assignees": [

    ],
    "requested_reviewers": [
      {
        "login": "davigonz",
        "id": 15261363,
        "avatar_url": "https://avatars0.githubusercontent.com/u/15261363?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davigonz",
        "html_url": "https://github.com/davigonz",
        "followers_url": "https://api.github.com/users/davigonz/followers",
        "following_url": "https://api.github.com/users/davigonz/following{/other_user}",
        "gists_url": "https://api.github.com/users/davigonz/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/davigonz/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/davigonz/subscriptions",
        "organizations_url": "https://api.github.com/users/davigonz/orgs",
        "repos_url": "https://api.github.com/users/davigonz/repos",
        "events_url": "https://api.github.com/users/davigonz/events{/privacy}",
        "received_events_url": "https://api.github.com/users/davigonz/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "requested_teams": [

    ],
    "labels": [

    ],
    "milestone": null,
    "commits_url": "https://api.github.com/repos/owncloud/android/pulls/2152/commits",
    "review_comments_url": "https://api.github.com/repos/owncloud/android/pulls/2152/comments",
    "review_comment_url": "https://api.github.com/repos/owncloud/android/pulls/comments{/number}",
    "comments_url": "https://api.github.com/repos/owncloud/android/issues/2152/comments",
    "statuses_url": "https://api.github.com/repos/owncloud/android/statuses/a2b2adbaa8b581606388bc35282ef7b3b373f914",
    "head": {
      "label": "owncloud:downicon",
      "ref": "downicon",
      "sha": "a2b2adbaa8b581606388bc35282ef7b3b373f914",
      "user": {
        "login": "owncloud",
        "id": 1645051,
        "avatar_url": "https://avatars3.githubusercontent.com/u/1645051?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/owncloud",
        "html_url": "https://github.com/owncloud",
        "followers_url": "https://api.github.com/users/owncloud/followers",
        "following_url": "https://api.github.com/users/owncloud/following{/other_user}",
        "gists_url": "https://api.github.com/users/owncloud/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/owncloud/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/owncloud/subscriptions",
        "organizations_url": "https://api.github.com/users/owncloud/orgs",
        "repos_url": "https://api.github.com/users/owncloud/repos",
        "events_url": "https://api.github.com/users/owncloud/events{/privacy}",
        "received_events_url": "https://api.github.com/users/owncloud/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 5550567,
        "name": "android",
        "full_name": "owncloud/android",
        "owner": {
          "login": "owncloud",
          "id": 1645051,
          "avatar_url": "https://avatars3.githubusercontent.com/u/1645051?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/owncloud",
          "html_url": "https://github.com/owncloud",
          "followers_url": "https://api.github.com/users/owncloud/followers",
          "following_url": "https://api.github.com/users/owncloud/following{/other_user}",
          "gists_url": "https://api.github.com/users/owncloud/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/owncloud/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/owncloud/subscriptions",
          "organizations_url": "https://api.github.com/users/owncloud/orgs",
          "repos_url": "https://api.github.com/users/owncloud/repos",
          "events_url": "https://api.github.com/users/owncloud/events{/privacy}",
          "received_events_url": "https://api.github.com/users/owncloud/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/owncloud/android",
        "description": ":phone: The ownCloud Android App",
        "fork": false,
        "url": "https://api.github.com/repos/owncloud/android",
        "forks_url": "https://api.github.com/repos/owncloud/android/forks",
        "keys_url": "https://api.github.com/repos/owncloud/android/keys{/key_id}",
        "collaborators_url": "https://api.github.com/repos/owncloud/android/collaborators{/collaborator}",
        "teams_url": "https://api.github.com/repos/owncloud/android/teams",
        "hooks_url": "https://api.github.com/repos/owncloud/android/hooks",
        "issue_events_url": "https://api.github.com/repos/owncloud/android/issues/events{/number}",
        "events_url": "https://api.github.com/repos/owncloud/android/events",
        "assignees_url": "https://api.github.com/repos/owncloud/android/assignees{/user}",
        "branches_url": "https://api.github.com/repos/owncloud/android/branches{/branch}",
        "tags_url": "https://api.github.com/repos/owncloud/android/tags",
        "blobs_url": "https://api.github.com/repos/owncloud/android/git/blobs{/sha}",
        "git_tags_url": "https://api.github.com/repos/owncloud/android/git/tags{/sha}",
        "git_refs_url": "https://api.github.com/repos/owncloud/android/git/refs{/sha}",
        "trees_url": "https://api.github.com/repos/owncloud/android/git/trees{/sha}",
        "statuses_url": "https://api.github.com/repos/owncloud/android/statuses/{sha}",
        "languages_url": "https://api.github.com/repos/owncloud/android/languages",
        "stargazers_url": "https://api.github.com/repos/owncloud/android/stargazers",
        "contributors_url": "https://api.github.com/repos/owncloud/android/contributors",
        "subscribers_url": "https://api.github.com/repos/owncloud/android/subscribers",
        "subscription_url": "https://api.github.com/repos/owncloud/android/subscription",
        "commits_url": "https://api.github.com/repos/owncloud/android/commits{/sha}",
        "git_commits_url": "https://api.github.com/repos/owncloud/android/git/commits{/sha}",
        "comments_url": "https://api.github.com/repos/owncloud/android/comments{/number}",
        "issue_comment_url": "https://api.github.com/repos/owncloud/android/issues/comments{/number}",
        "contents_url": "https://api.github.com/repos/owncloud/android/contents/{+path}",
        "compare_url": "https://api.github.com/repos/owncloud/android/compare/{base}...{head}",
        "merges_url": "https://api.github.com/repos/owncloud/android/merges",
        "archive_url": "https://api.github.com/repos/owncloud/android/{archive_format}{/ref}",
        "downloads_url": "https://api.github.com/repos/owncloud/android/downloads",
        "issues_url": "https://api.github.com/repos/owncloud/android/issues{/number}",
        "pulls_url": "https://api.github.com/repos/owncloud/android/pulls{/number}",
        "milestones_url": "https://api.github.com/repos/owncloud/android/milestones{/number}",
        "notifications_url": "https://api.github.com/repos/owncloud/android/notifications{?since,all,participating}",
        "labels_url": "https://api.github.com/repos/owncloud/android/labels{/name}",
        "releases_url": "https://api.github.com/repos/owncloud/android/releases{/id}",
        "deployments_url": "https://api.github.com/repos/owncloud/android/deployments",
        "created_at": "2012-08-25T10:35:56Z",
        "updated_at": "2018-03-16T12:02:58Z",
        "pushed_at": "2018-03-16T12:02:54Z",
        "git_url": "git://github.com/owncloud/android.git",
        "ssh_url": "git@github.com:owncloud/android.git",
        "clone_url": "https://github.com/owncloud/android.git",
        "svn_url": "https://github.com/owncloud/android",
        "homepage": "",
        "size": 177089,
        "stargazers_count": 2434,
        "watchers_count": 2434,
        "language": "Java",
        "has_issues": true,
        "has_projects": true,
        "has_downloads": true,
        "has_wiki": true,
        "has_pages": false,
        "forks_count": 2636,
        "mirror_url": null,
        "archived": false,
        "open_issues_count": 369,
        "license": {
          "key": "gpl-2.0",
          "name": "GNU General Public License v2.0",
          "spdx_id": "GPL-2.0",
          "url": "https://api.github.com/licenses/gpl-2.0"
        },
        "forks": 2636,
        "open_issues": 369,
        "watchers": 2434,
        "default_branch": "master"
      }
    },
    "base": {
      "label": "owncloud:master",
      "ref": "master",
      "sha": "cbc34f7d097f447a1bc60464c98e371762b62b1d",
      "user": {
        "login": "owncloud",
        "id": 1645051,
        "avatar_url": "https://avatars3.githubusercontent.com/u/1645051?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/owncloud",
        "html_url": "https://github.com/owncloud",
        "followers_url": "https://api.github.com/users/owncloud/followers",
        "following_url": "https://api.github.com/users/owncloud/following{/other_user}",
        "gists_url": "https://api.github.com/users/owncloud/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/owncloud/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/owncloud/subscriptions",
        "organizations_url": "https://api.github.com/users/owncloud/orgs",
        "repos_url": "https://api.github.com/users/owncloud/repos",
        "events_url": "https://api.github.com/users/owncloud/events{/privacy}",
        "received_events_url": "https://api.github.com/users/owncloud/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 5550567,
        "name": "android",
        "full_name": "owncloud/android",
        "owner": {
          "login": "owncloud",
          "id": 1645051,
          "avatar_url": "https://avatars3.githubusercontent.com/u/1645051?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/owncloud",
          "html_url": "https://github.com/owncloud",
          "followers_url": "https://api.github.com/users/owncloud/followers",
          "following_url": "https://api.github.com/users/owncloud/following{/other_user}",
          "gists_url": "https://api.github.com/users/owncloud/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/owncloud/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/owncloud/subscriptions",
          "organizations_url": "https://api.github.com/users/owncloud/orgs",
          "repos_url": "https://api.github.com/users/owncloud/repos",
          "events_url": "https://api.github.com/users/owncloud/events{/privacy}",
          "received_events_url": "https://api.github.com/users/owncloud/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/owncloud/android",
        "description": ":phone: The ownCloud Android App",
        "fork": false,
        "url": "https://api.github.com/repos/owncloud/android",
        "forks_url": "https://api.github.com/repos/owncloud/android/forks",
        "keys_url": "https://api.github.com/repos/owncloud/android/keys{/key_id}",
        "collaborators_url": "https://api.github.com/repos/owncloud/android/collaborators{/collaborator}",
        "teams_url": "https://api.github.com/repos/owncloud/android/teams",
        "hooks_url": "https://api.github.com/repos/owncloud/android/hooks",
        "issue_events_url": "https://api.github.com/repos/owncloud/android/issues/events{/number}",
        "events_url": "https://api.github.com/repos/owncloud/android/events",
        "assignees_url": "https://api.github.com/repos/owncloud/android/assignees{/user}",
        "branches_url": "https://api.github.com/repos/owncloud/android/branches{/branch}",
        "tags_url": "https://api.github.com/repos/owncloud/android/tags",
        "blobs_url": "https://api.github.com/repos/owncloud/android/git/blobs{/sha}",
        "git_tags_url": "https://api.github.com/repos/owncloud/android/git/tags{/sha}",
        "git_refs_url": "https://api.github.com/repos/owncloud/android/git/refs{/sha}",
        "trees_url": "https://api.github.com/repos/owncloud/android/git/trees{/sha}",
        "statuses_url": "https://api.github.com/repos/owncloud/android/statuses/{sha}",
        "languages_url": "https://api.github.com/repos/owncloud/android/languages",
        "stargazers_url": "https://api.github.com/repos/owncloud/android/stargazers",
        "contributors_url": "https://api.github.com/repos/owncloud/android/contributors",
        "subscribers_url": "https://api.github.com/repos/owncloud/android/subscribers",
        "subscription_url": "https://api.github.com/repos/owncloud/android/subscription",
        "commits_url": "https://api.github.com/repos/owncloud/android/commits{/sha}",
        "git_commits_url": "https://api.github.com/repos/owncloud/android/git/commits{/sha}",
        "comments_url": "https://api.github.com/repos/owncloud/android/comments{/number}",
        "issue_comment_url": "https://api.github.com/repos/owncloud/android/issues/comments{/number}",
        "contents_url": "https://api.github.com/repos/owncloud/android/contents/{+path}",
        "compare_url": "https://api.github.com/repos/owncloud/android/compare/{base}...{head}",
        "merges_url": "https://api.github.com/repos/owncloud/android/merges",
        "archive_url": "https://api.github.com/repos/owncloud/android/{archive_format}{/ref}",
        "downloads_url": "https://api.github.com/repos/owncloud/android/downloads",
        "issues_url": "https://api.github.com/repos/owncloud/android/issues{/number}",
        "pulls_url": "https://api.github.com/repos/owncloud/android/pulls{/number}",
        "milestones_url": "https://api.github.com/repos/owncloud/android/milestones{/number}",
        "notifications_url": "https://api.github.com/repos/owncloud/android/notifications{?since,all,participating}",
        "labels_url": "https://api.github.com/repos/owncloud/android/labels{/name}",
        "releases_url": "https://api.github.com/repos/owncloud/android/releases{/id}",
        "deployments_url": "https://api.github.com/repos/owncloud/android/deployments",
        "created_at": "2012-08-25T10:35:56Z",
        "updated_at": "2018-03-16T12:02:58Z",
        "pushed_at": "2018-03-16T12:02:54Z",
        "git_url": "git://github.com/owncloud/android.git",
        "ssh_url": "git@github.com:owncloud/android.git",
        "clone_url": "https://github.com/owncloud/android.git",
        "svn_url": "https://github.com/owncloud/android",
        "homepage": "",
        "size": 177089,
        "stargazers_count": 2434,
        "watchers_count": 2434,
        "language": "Java",
        "has_issues": true,
        "has_projects": true,
        "has_downloads": true,
        "has_wiki": true,
        "has_pages": false,
        "forks_count": 2636,
        "mirror_url": null,
        "archived": false,
        "open_issues_count": 369,
        "license": {
          "key": "gpl-2.0",
          "name": "GNU General Public License v2.0",
          "spdx_id": "GPL-2.0",
          "url": "https://api.github.com/licenses/gpl-2.0"
        },
        "forks": 2636,
        "open_issues": 369,
        "watchers": 2434,
        "default_branch": "master"
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/owncloud/android/pulls/2152"
      },
      "html": {
        "href": "https://github.com/owncloud/android/pull/2152"
      },
      "issue": {
        "href": "https://api.github.com/repos/owncloud/android/issues/2152"
      },
      "comments": {
        "href": "https://api.github.com/repos/owncloud/android/issues/2152/comments"
      },
      "review_comments": {
        "href": "https://api.github.com/repos/owncloud/android/pulls/2152/comments"
      },
      "review_comment": {
        "href": "https://api.github.com/repos/owncloud/android/pulls/comments{/number}"
      },
      "commits": {
        "href": "https://api.github.com/repos/owncloud/android/pulls/2152/commits"
      },
      "statuses": {
        "href": "https://api.github.com/repos/owncloud/android/statuses/a2b2adbaa8b581606388bc35282ef7b3b373f914"
      }
    },
    "author_association": "NONE"
  },
```

我尝试用类比的方法来解释一下 pull reqeust。想想我们中学考试，老师改卷的场景吧。你做的试卷就像仓库，你的试卷肯定会有很多错误，就相当于程序里的 bug。老师把你的试卷拿过来，相当于先 fork。在你的卷子上做一些修改批注，相当于 git commit。最后把改好的试卷给你，相当于发 pull request，你拿到试卷重新改正错误，相当于 merge。当你想更正别人仓库里的错误时，要走一个流程：
+ 先 fork 别人的仓库，相当于拷贝一份，相信我，不会有人直接让你改修原仓库的
+ clone 到本地分支，做一些 bug fix
+ 发起 pull request 给原仓库，让他看到你修改的 bug
+ 原仓库 review 这个 bug，如果是正确的话，就会 merge 到他自己的项目中
至此，整个 pull request 的过程就结束了。理解了 pull request 的含义和流程，具体操作也就简单了


"html_url": "https://github.com/owncloud/android/pull/2152",
"diff_url": "https://github.com/owncloud/android/pull/2152.diff",
"patch_url": "https://github.com/owncloud/android/pull/2152.patch",
"issue_url": "https://api.github.com/repos/owncloud/android/issues/2152",
  "review_comments": {
        "href": "https://api.github.com/repos/owncloud/android/pulls/2152/comments"
      },
"commits": {
        "href": "https://api.github.com/repos/owncloud/android/pulls/2152/commits"
      },
"merge_commit_sha": "89afd53c96a5cbf9f0d6f473dda305c2c3f407fd",

### 爬取comments_url
 "position": 11,
    "line": 247,
    "path": "src/com/owncloud/android/ui/fragment/FileDetailFragment.java",
    "commit_id": "76ba00b2b23f5c2079a6635dc5e661850c3c5dfb",
    body": "please comment in english\n"

## CrawlGithub 总结
### 成分
### issue
议题（Issue）是 github 中管理任务的有效方法，它能保存任务的进度、跟踪任务的管理和追溯项目的bugs。它有点像可以用来跟团队分享和讨论的邮件。大多数的软件项目都有各自 bugs 追溯系统，GitHub的追溯系统就叫做议题，它在 github 的仓库中发挥着独特的作用。
因为 GitHub 的运作机制更关注团队的协作、关联和高效沟通，所以 issue 的追溯会设置得比较特别。一个典型 GitHub 的 issue 应具备以下要素：
+ 标题和说明，来解释 issue 的目的；
+ 彩色标签（Color-coded labels），方便日后对 issue 进行分类；
+ 里程碑（milestone），用里程碑来汇总相关的 issue，表示要实现的阶段性目标。例如（一周冲刺 9/5-9/16 或 Shipping 1.0)
+ 对接人（assignee），希望对接人能够在某时间段对 issue 负责；
+ 评论（comment），这样才能接收到别人对仓库的反馈。

爬取所有issues
属性：
+ issue_number: 编号
+ title：题目
+ body：主体

+ labels : [result[labels][$i][name]]
+ state ：
+ locked ：
+ user :
+ assignees :
+ created updated closed
+ author_association
+ comments：int
关联：
+ comments: 可能有评论
+ events：可能有事件
+ pull：可能有pull request


# print results
            for result in results:
                dealdata={}

                # for k,v in result.items():
                #     print k,
                print {"issue_number":result["number"], "body": result["body"], "label":[label["name"] for label in result["labels"] if len(label)>0]
                print "comments", result["comments"]
                print "html",result["html_url"]
                print "state", result["state"]
                if "pull_request" in result.keys():
                    print "pull",result["pull_request"]

### 梳理API of GitHub
按以下结构梳理
+ 类型：
+ 关联：
![](foo.png)
+ 爬取什么东西？
+ A. 哪些是bug修复？
+ B. 语料库 issue 和 commit 建立
pull 必然有 issue 和 commit
issue 必然有 body 和comment 和 event
commit 必然有 filechange 和 comment 和 event

所以
1. 对于 pull 中的
```json
{
  'files': 1
  'pull_changes': (1, 5)
  'commits':
  [
    {
      'commit_changes': (1, 5, 6)
      'message': [u'Fixes #7541: Catched invalid argument in URI parsing'],
      'sha': [u'2ca29f3e29c9454a01688175be58393820fa26ab'],
      u'2ca29f3e29c9454a01688175be58393820fa26ab':
      {
        'comments': [],
        'filenames': [u'src/com/owncloud/android/authentication/AuthenticatorActivity.java']
        u'src/com/owncloud/android/authentication/AuthenticatorActivity.java':
        {
          'file_changes': (1, 5, 6),
          'patch':
          u'@@ -809,7 +809,11 @@ private void checkOcServer() {\n
            uri = stripIndexPhpOrAppsFiles(uri, mHostUrlInput);\r\n \r\n
            // Handle internationalized domain names\r\n-
            uri = DisplayUtils.convertIdn(uri, true);\r\n+
            try {\r\n+
              uri = DisplayUtils.convertIdn(uri, true);\r\n+            } catch (IllegalArgumentException ex) {\r\n+
              // Let Owncloud library check the error of the malformed URI\r\n+
              }\r\n \r\n
               mServerStatusText = R.string.auth_testing_connection;\r\n
               mServerStatusIcon = R.drawable.progress_small;\r'
         },
       },
     }
    ],
  'issue':
  {
    'body': u'Bug Fixed\n',
    'title': u'Fixes #7541: Catched invalid argument in URI parsing',
    'labels': [u'approved by qa', u'bug', u'login'],
    'number': 1470,
    'comments':
    [u'What is #7541? This Bug/Ussue does not exist?\n', u'yep, the aim of this pr is to fix a known bug: \n\nSteps:  fill as server url an incorrect one, something that included 2 dots such as docker.oc..sg.es\n- CURRENT BEHAVIOR\n      -- App crashes\n', ugetfiles, u':+1: \n'],
    'events': [u'labeled', u'labeled', u'milestoned', u'labeled', u'mentioned', u'subscribed', u'mentioned', u'subscribed', u'referenced', u'merged', u'closed', u'head_ref_deleted', u'referenced']
   }
}
```


### find Android 项目

https://api.github.com/search/repositories?q=stars%3A1000..1050&order=desc

```json
{
  "total_count": 647,
  "incomplete_results": false,
  "items": [
    {
      "id": 3250434,
      "name": "dozer",
      "full_name": "DozerMapper/dozer",
      "owner": {
        "login": "DozerMapper",
        "id": 1372459,
        "avatar_url": "https://avatars1.githubusercontent.com/u/1372459?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DozerMapper",
        "html_url": "https://github.com/DozerMapper",
        "followers_url": "https://api.github.com/users/DozerMapper/followers",
        "following_url": "https://api.github.com/users/DozerMapper/following{/other_user}",
        "gists_url": "https://api.github.com/users/DozerMapper/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/DozerMapper/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/DozerMapper/subscriptions",
        "organizations_url": "https://api.github.com/users/DozerMapper/orgs",
        "repos_url": "https://api.github.com/users/DozerMapper/repos",
        "events_url": "https://api.github.com/users/DozerMapper/events{/privacy}",
        "received_events_url": "https://api.github.com/users/DozerMapper/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "private": false,
      "html_url": "https://github.com/DozerMapper/dozer",
      "description": "Dozer is a Java Bean to Java Bean mapper that recursively copies data from one object to another. ",
      "fork": false,
      "url": "https://api.github.com/repos/DozerMapper/dozer",
      "forks_url": "https://api.github.com/repos/DozerMapper/dozer/forks",
      "keys_url": "https://api.github.com/repos/DozerMapper/dozer/keys{/key_id}",
      "collaborators_url": "https://api.github.com/repos/DozerMapper/dozer/collaborators{/collaborator}",
      "teams_url": "https://api.github.com/repos/DozerMapper/dozer/teams",
      "hooks_url": "https://api.github.com/repos/DozerMapper/dozer/hooks",
      "issue_events_url": "https://api.github.com/repos/DozerMapper/dozer/issues/events{/number}",
      "events_url": "https://api.github.com/repos/DozerMapper/dozer/events",
      "assignees_url": "https://api.github.com/repos/DozerMapper/dozer/assignees{/user}",
      "branches_url": "https://api.github.com/repos/DozerMapper/dozer/branches{/branch}",
      "tags_url": "https://api.github.com/repos/DozerMapper/dozer/tags",
      "blobs_url": "https://api.github.com/repos/DozerMapper/dozer/git/blobs{/sha}",
      "git_tags_url": "https://api.github.com/repos/DozerMapper/dozer/git/tags{/sha}",
      "git_refs_url": "https://api.github.com/repos/DozerMapper/dozer/git/refs{/sha}",
      "trees_url": "https://api.github.com/repos/DozerMapper/dozer/git/trees{/sha}",
      "statuses_url": "https://api.github.com/repos/DozerMapper/dozer/statuses/{sha}",
      "languages_url": "https://api.github.com/repos/DozerMapper/dozer/languages",
      "stargazers_url": "https://api.github.com/repos/DozerMapper/dozer/stargazers",
      "contributors_url": "https://api.github.com/repos/DozerMapper/dozer/contributors",
      "subscribers_url": "https://api.github.com/repos/DozerMapper/dozer/subscribers",
      "subscription_url": "https://api.github.com/repos/DozerMapper/dozer/subscription",
      "commits_url": "https://api.github.com/repos/DozerMapper/dozer/commits{/sha}",
      "git_commits_url": "https://api.github.com/repos/DozerMapper/dozer/git/commits{/sha}",
      "comments_url": "https://api.github.com/repos/DozerMapper/dozer/comments{/number}",
      "issue_comment_url": "https://api.github.com/repos/DozerMapper/dozer/issues/comments{/number}",
      "contents_url": "https://api.github.com/repos/DozerMapper/dozer/contents/{+path}",
      "compare_url": "https://api.github.com/repos/DozerMapper/dozer/compare/{base}...{head}",
      "merges_url": "https://api.github.com/repos/DozerMapper/dozer/merges",
      "archive_url": "https://api.github.com/repos/DozerMapper/dozer/{archive_format}{/ref}",
      "downloads_url": "https://api.github.com/repos/DozerMapper/dozer/downloads",
      "issues_url": "https://api.github.com/repos/DozerMapper/dozer/issues{/number}",
      "pulls_url": "https://api.github.com/repos/DozerMapper/dozer/pulls{/number}",
      "milestones_url": "https://api.github.com/repos/DozerMapper/dozer/milestones{/number}",
      "notifications_url": "https://api.github.com/repos/DozerMapper/dozer/notifications{?since,all,participating}",
      "labels_url": "https://api.github.com/repos/DozerMapper/dozer/labels{/name}",
      "releases_url": "https://api.github.com/repos/DozerMapper/dozer/releases{/id}",
      "deployments_url": "https://api.github.com/repos/DozerMapper/dozer/deployments",
      "created_at": "2012-01-23T21:11:58Z",
      "updated_at": "2018-03-19T08:00:20Z",
      "pushed_at": "2018-03-18T19:47:45Z",
      "git_url": "git://github.com/DozerMapper/dozer.git",
      "ssh_url": "git@github.com:DozerMapper/dozer.git",
      "clone_url": "https://github.com/DozerMapper/dozer.git",
      "svn_url": "https://github.com/DozerMapper/dozer",
      "homepage": "https://dozermapper.github.io/",
      "size": 19059,
      "stargazers_count": 1050,
      "watchers_count": 1050,
      "language": "Java",
      "has_issues": true,
      "has_projects": true,
      "has_downloads": true,
      "has_wiki": true,
      "has_pages": false,
      "forks_count": 348,
      "mirror_url": null,
      "archived": false,
      "open_issues_count": 83,
      "license": {
        "key": "apache-2.0",
        "name": "Apache License 2.0",
        "spdx_id": "Apache-2.0",
        "url": "https://api.github.com/licenses/apache-2.0"
      },
      "forks": 348,
      "open_issues": 83,
      "watchers": 1050,
      "default_branch": "master",
      "score": 1.0
    },

  ]

}
```
###
+ 大型项目 走 pull-request
+ 个人项目 走 commit- bug

### 爬取Android 项目
https://api.github.com/repos/owncloud/android/contents
+ topic： android  language：java  statr
+ 是Android项目， 具备 AndroidManifest文件。具备标准gradle项目下 res\layout文件
+ 902个

### 获得提交描述信息中有 bug修复的commit


### 获得token
